(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6b55"],{7468:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"header"},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{icon:"el-icon-circle-plus",size:"mini",type:"primary"},on:{click:e.addRow}},[e._v(" Mail ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rows,border:"",stripe:"","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("dbid")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.dbid,callback:function(t){e.$set(e.params,"dbid",t)},expression:"params.dbid"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.dbid))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("玩家账号ID")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.playerid,callback:function(t){e.$set(e.params,"playerid",t)},expression:"params.playerid"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.playerid))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("邮件读取状态")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.readstatus,callback:function(t){e.$set(e.params,"readstatus",t)},expression:"params.readstatus"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.readstatus))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("邮件发送时间")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.sendtime,callback:function(t){e.$set(e.params,"sendtime",t)},expression:"params.sendtime"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.sendtime))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("邮件标题")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.head,callback:function(t){e.$set(e.params,"head",t)},expression:"params.head"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.head))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("邮件内容")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.context,callback:function(t){e.$set(e.params,"context",t)},expression:"params.context"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.context))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("奖励的物品")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.award,callback:function(t){e.$set(e.params,"award",t)},expression:"params.award"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.award))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("奖励物品的领奖状态")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.awardstatus,callback:function(t){e.$set(e.params,"awardstatus",t)},expression:"params.awardstatus"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.awardstatus))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("邮件奖励记录类型")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.log_type,callback:function(t){e.$set(e.params,"log_type",t)},expression:"params.log_type"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.log_type))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("邮件奖励记录")]),a("div",[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.columnSearch(t)}},model:{value:e.params.log,callback:function(t){e.$set(e.params,"log",t)},expression:"params.log"}})],1)]}},{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.log))])]}}])}),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"115"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",[e._v("操作")]),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v(" 搜索 ")])],1)]}},{key:"default",fn:function(t){return[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return e.editRow(t.row)}}}),a("el-popconfirm",{attrs:{title:"你确定删除吗？",icon:"el-icon-delete"},on:{confirm:function(a){return e.deleteRow(t.row,t.$index)}}},[a("el-button",{attrs:{slot:"reference",icon:"el-icon-delete",type:"danger",size:"mini"},slot:"reference"})],1)],1)]}}])})],1),a("div",{staticStyle:{padding:"30px","text-align":"center"}},[e.meta?a("el-pagination",{attrs:{background:"","current-page":e.params.currentPage,"page-sizes":[10,20,30,50],"page-size":e.params.perPage,layout:"total, sizes, prev, pager, next, jumper",total:e.meta.total},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}}):e._e()],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"dbid"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"dbid"},model:{value:e.formData.dbid,callback:function(t){e.$set(e.formData,"dbid",t)},expression:"formData.dbid"}})],1),a("el-form-item",{attrs:{label:"玩家账号ID"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"玩家账号ID"},model:{value:e.formData.playerid,callback:function(t){e.$set(e.formData,"playerid",t)},expression:"formData.playerid"}})],1),a("el-form-item",{attrs:{label:"邮件读取状态"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"邮件读取状态"},model:{value:e.formData.readstatus,callback:function(t){e.$set(e.formData,"readstatus",t)},expression:"formData.readstatus"}})],1),a("el-form-item",{attrs:{label:"邮件发送时间"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"邮件发送时间"},model:{value:e.formData.sendtime,callback:function(t){e.$set(e.formData,"sendtime",t)},expression:"formData.sendtime"}})],1),a("el-form-item",{attrs:{label:"邮件标题"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"邮件标题"},model:{value:e.formData.head,callback:function(t){e.$set(e.formData,"head",t)},expression:"formData.head"}})],1),a("el-form-item",{attrs:{label:"邮件内容"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"邮件内容"},model:{value:e.formData.context,callback:function(t){e.$set(e.formData,"context",t)},expression:"formData.context"}})],1),a("el-form-item",{attrs:{label:"奖励的物品"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"奖励的物品"},model:{value:e.formData.award,callback:function(t){e.$set(e.formData,"award",t)},expression:"formData.award"}})],1),a("el-form-item",{attrs:{label:"奖励物品的领奖状态"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"奖励物品的领奖状态"},model:{value:e.formData.awardstatus,callback:function(t){e.$set(e.formData,"awardstatus",t)},expression:"formData.awardstatus"}})],1),a("el-form-item",{attrs:{label:"邮件奖励记录类型"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"邮件奖励记录类型"},model:{value:e.formData.log_type,callback:function(t){e.$set(e.formData,"log_type",t)},expression:"formData.log_type"}})],1),a("el-form-item",{attrs:{label:"邮件奖励记录"}},[a("el-input",{attrs:{autocomplete:"off",palceholder:"邮件奖励记录"},model:{value:e.formData.log,callback:function(t){e.$set(e.formData,"log",t)},expression:"formData.log"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.submitForm}},[e._v(e._s(e.dialogBtnTxt))])],1)])],1)},i=[],r=a("424b"),l={name:"Mail",data:()=>({loading:!1,meta:null,rows:null,params:{perPage:10,currentPage:1},formData:{},formRules:{},dialogVisible:!1,dialogAction:"Dialog",dialogTitle:"Title",dialogBtnTxt:"Submit"}),mounted(){this.search()},methods:{handleSizeChange:function(e){this.params.perPage=e,this.params.currentPage=1,this.search()},handlePageChange:function(e){this.params.currentPage=e,this.search()},columnSearch:function(){this.params.currentPage=1,this.search()},search:function(){this.loading=!0,r["a"].get("admin/mails",this.params).then(e=>{this.rows=e.data,this.meta=e.meta}).catch(e=>{this.$message.error(e.config.url+"#"+e.message)}).finally(()=>{this.loading=!1})},reset:function(){this.params={perPage:10,currentPage:1},this.search()},addRow:function(){this.dialogVisible=!0,this.dialogAction="add",this.dialogTitle="添加一条记录",this.dialogBtnTxt="提 交",this.formData={}},saveRow:function(){let e=Object.assign({},this.formData);r["a"].post("admin/mails",e).then(e=>{this.dialogVisible=!1,this.$message.success("添加成功"),this.params={id:e.data.id},this.search(),this.formData={}}).catch(e=>{this.$message.error(e.config.url+"#"+e.message)})},editRow:function(e){this.dialogVisible=!0,this.dialogAction="edit",this.dialogTitle="修改这条记录",this.dialogBtnTxt="保 存",this.formData=e},updateRow:function(){this.loading=!0;let e=Object.assign({},this.formData);r["a"].put("admin/mails/"+e.id,e).then(e=>{this.dialogVisible=!1,this.loading=!1,this.$message.success("保存成功"),this.formData={}}).catch(e=>{this.$message.error(e.config.url+"#"+e.message)}).finally(()=>{this.loading=!1})},deleteRow:function(e,t){this.loading=!0,r["a"].destroy("admin/mails/"+e.id).then(e=>{this.rows.splice(t,1),this.$message.success("删除成功"),0==this.rows.length&&(this.meta.last_page!=this.meta.current_page?this.search():this.handlePageChange(this.params.currentPage-1))}).catch(e=>{this.$message.error(e.config.url+"#"+e.message)}).finally(()=>{this.loading=!1})},submitForm:function(e){this.$refs["form"].validate(e=>{if(!e)return console.log("error"),!1;"add"==this.dialogAction?this.saveRow():"edit"==this.dialogAction&&this.updateRow()})}}},o=l,s=a("2877"),d=Object(s["a"])(o,n,i,!1,null,"5412e9b1",null);t["default"]=d.exports}}]);